pre-commit:
  parallel: true
  commands:
    fmt:
      glob: "*.go"
      run: make fmt && git diff --exit-code {staged_files} || (echo "Code formatting autofixed. Please stage the changes and try again." && exit 1)

    swag:
      glob: "internal/handler/*.go"
      run: make swag && git diff --exit-code docs/ || (echo "Swagger documentation regenerated. Please stage the changes in docs/ and try again." && exit 1)
    lint:
      glob: "*.go"
      run: make lint

    test:
      glob: "*.go"
      run: make test-all

pre-push:
  parallel: true
  commands:
    vuln:
      glob: "*.go"
      run: make vuln

    test-race:
      glob: "*.go"
      run: make test-some-race
